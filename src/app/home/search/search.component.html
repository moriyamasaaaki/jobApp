<section>
  <ais-instantsearch [config]="config">
    <div class="search-box">
      <ais-search-box
        placeholder="求人検索"
        [autofocus]="true"
      ></ais-search-box>
    </div>
    <ais-hits>
      <ng-template let-hits="hits" let-results="results">
        <ng-container *ngIf="hits.length === 0">
          検索結果"{{ results.query }}"は見つかりませんでした
        </ng-container>
        <div *ngIf="results.query && results.query.length > 0">
          <ais-stats>
            <ng-template let-state="state">
              {{ state.nbHits }} 件ヒットしました
            </ng-template>
          </ais-stats>
          <div class="job-box">
            <div class="job-box__card" *ngFor="let hit of hits">
              <ng-container *ngIf="hit.jobImageUrls; else defaultImg">
                <a routerLink="/detail/{{ hit.id }}">
                  <img [src]="hit.jobImageUrls[0]" alt="" />
                </a>
              </ng-container>
              <ng-template #defaultImg>
                <a
                  routerLink="/detail/{{ hit.id }}"
                  class="job-box__default-img"
                >
                  <img src="assets/unnamed.png" alt="" />
                </a>
              </ng-template>
              <div class="job-box__content">
                <p>
                  <a routerLink="/detail/{{ hit.id }}" class="job-box__title"
                    >{{ hit.companyName }}
                  </a>
                </p>
                <ul>
                  <li>{{ hit.workPlace }}</li>
                  <li>{{ hit.salary }}円</li>
                </ul>
                <a routerLink="/detail/{{ hit.id }}">
                  <button mat-raised-button color="primary">もっと見る</button>
                </a>
              </div>
            </div>
          </div>
        </div>
      </ng-template>
    </ais-hits>
  </ais-instantsearch>
</section>
